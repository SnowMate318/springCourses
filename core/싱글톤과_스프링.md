# 싱글톤과 스프링


### 싱글톤

객체를 하나만 만든다는 원칙을 기반한 패턴

#### 장점

* 요청마다 객채를 새로 만들지 않아서 성능을 올려줌

#### 단점


* 구현하는 코드 자체가 많아짐
* DIP 위반 (구체화된 클래스에 의존)
* 같은 이유로 OCP 위반 가능성이 있음
* private -> 테스트하기 어려움
* 내부 속성 변경 및 초기화가 어려움
* private 생성자로 자식 클래스 만들기 어려움
* 유연성이 떨어짐
* 안티패턴으로 불리기도 함

### 스프링 싱글톤 컨테이너



스프링 빈 객체 인스턴스를 싱글톤으로 관리하면서 기존 싱글톤의 단점을 해결함

물론 객체 생성으로 관리하는 방법도 빈스코프를 통해 사용할 수 있긴 함


### 싱글톤 방식의 주의점

여러 클라이언트가 하나의 인스턴스를 공유한다

-> 상태를 유지하도록 설계하면 안됨(무상태로 존재)

* 특정 클라이언트에 의존적인 필드가 있으면 안됨
* 특정 클라이언트가 값을 변경하도록 하면 안됨
* 가급적 읽기만 가능해야 함
* 필드 대신 자바에서 공유되지 않는 지역변수, 파람이터, ThreadLocal 등을 사용해야함
* 스프링 빈의 필드에 공유 값을 설정하면 큰 장애 발생 가능
* 무상태로 설계해야함